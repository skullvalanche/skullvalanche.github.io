{% extends "base.html" %}

{% block content %}
<h1 class="title">
  {{ page.title }}
</h1>
<p class="subtitle"><strong>{{ page.date }}</strong></p>
{{ page.content | safe }}

<button role="button" onclick="window.location.href='..';">back</button>
<script src="https://giscus.app/client.js"
  data-repo="skullvalanche/skullvalanche.github.io"
  data-repo-id="MDEwOlJlcG9zaXRvcnk4Njk0ODQyOA=="
  data-category="General"
  data-category-id="DIC_kwDOBS66TM4CmAP0"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="dark"
  data-lang="en"
  crossorigin="anonymous"
  async>
</script>

<script>
function updateGiscusTheme() {
  const theme = document.documentElement.getAttribute("data-theme") || themeSwitcher.schemeFromLocalStorage;
  const giscusFrame = document.querySelector("iframe.giscus-frame");
  if (giscusFrame) {
    giscusFrame.contentWindow.postMessage({ 
      giscus: { setConfig: { theme: theme } }
    }, "https://giscus.app");
  }
}

// Run on page load
document.addEventListener("DOMContentLoaded", () => {
  updateGiscusTheme();
});

// Listen for theme changes
const observer = new MutationObserver(updateGiscusTheme);
observer.observe(document.documentElement, { attributes: true, attributeFilter: ["data-theme"] });

</script>
{% endblock content %}
